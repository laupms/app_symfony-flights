<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}flights{% endblock %}</title>
        <link rel="icon" type:"image/png" href="{{asset('img/favicon.png')}}">


        {# Run `composer require symfony/webpack-encore-bundle` to start using Symfony UX #}
        
        {% block stylesheets %}
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
            
            <script src="https://kit.fontawesome.com/57fead636f.js" crossorigin="anonymous"></script>
        {% endblock %}

        <link rel="stylesheet" href="{{asset('css/styles.css')}}">

    </head>

    <body>
        
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark mb-3">
            <div class="container-fluid">

                <div class="col-4">

                    <ul class="navbar-nav m-2">
                        <li>
                            {% if is_granted ('ROLE_ADMIN') %}
                            <h1 class="text-white"><a href="/admin" style="text-decoration:none; color:#ffffff;">flights <i class="fa-solid fa-plane-departure" style="color: #ffffff;"></i></a></h1>
                            {% else %}
                            <h1 class="text-white"><a href="/" style="text-decoration:none; color:#ffffff;">flights <i class="fa-solid fa-plane-departure" style="color: #ffffff;"></i></a></h1>
                            {% endif %}
                        </li>
                    </ul>
                
                </div>

                <div class="col-6">
            
                    <ul class="navbar-nav m-2" id="navLinks">
                        <li class="nav-item">
                            {% if is_granted ('ROLE_ADMIN') %}
                            <a class="nav-link {{ app.request.attributes.get('_route') == 'admin_index' ? 'active' : '' }}" href="/admin">Accueil</a>
                            {% else %}
                            <a class="nav-link {{ app.request.attributes.get('_route') == 'app_flights_index' ? 'active' : '' }}" href="/">Accueil</a>
                            {% endif %}
                        </li>

                        {% if is_granted ('ROLE_ADMIN') %}
                            <li class="nav-item">
                                <a class="nav-link {{ app.request.attributes.get('_route') == 'admin_cities_' ? 'active' : '' }}" href="/admin/cities">Villes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link {{ app.request.attributes.get('_route') == 'admin_user_' ? 'active' : '' }}" href="/admin/user">Utilisateurs</a>
                            </li>
                        {% endif %}

                        {% if is_granted ('ROLE_USER') %}
                            <li class="nav-item">
                                <a class="nav-link" href="/logout" onclick="return confirm('Êtes-vous sûr(e) de vouloir vous déconnecter de votre session ?');">Me déconnecter</a>
                            </li>
                        {% else %}
                            <li class="nav-item">
                                <a class="nav-link {{ app.request.attributes.get('_route') == 'app_login' ? 'active' : '' }}" href="/login">Connexion</a>
                            </li>
                        {% endif %}
                    </ul>

                </div>
            
                <div class="col-2">

                    <div class="burger" id="burger">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
            
                </div>

        </nav>


       {% if is_granted ('ROLE_USER') %}
        <div class="container-fluid justify-content-end">
             
            <p style="text-align:left;"><i class="fa-solid fa-circle fa-2xs" style="color: #24c637; padding:5px;"></i>Bienvenue {{ app.user.username }}, vous êtes connecté(e).</p>
        </div>
        {% endif %}

        {% block body %}

        {% endblock %}


        <footer>

            <nav class="navbar navbar-expand-sm bg navbar mt-3 position-relative" style="bottom:0;">
                <div class="container-fluid" style="justify-content:flex-end;">
                    <ul class="navbar-nav m-2 text-center" style="align-items:center;>
                        <li class="nav-item">
                            <a class="nav-link disabled" href="#">© 2024 flights</a>
                        </li>
                        <li class="nav-item">

                           {% if is_granted ('ROLE_ADMIN') %}
                    
                            <h2 class="m-3"> <a class="nav-link" href="/admin">flights <i class="fa-solid fa-plane-departure"></i></a></h2>
                            {% else %}
                    
                            <h2 class="m-3"> <a class="nav-link" href="/">flights <i class="fa-solid fa-plane-departure"></i></a></h2>
                            {% endif %}

                        </li>
                    </ul>
                </div>
            </nav>

            {% block javascripts %}
                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>

                <script> 
                    document.addEventListener('DOMContentLoaded', () => {
                        const burger = document.getElementById('burger');
                        const nav = document.getElementById('navLinks');

                        burger.addEventListener('click', () => {
                            nav.classList.toggle('active');
                        });
                    });
                </script>

            {% endblock %}



        </footer>

    </body>

</html>
